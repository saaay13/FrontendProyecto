@page
@model FrontendProyecto.Pages.Admin.Ongs.IndexModel
@{
    ViewData["Title"] = "ONGs";
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">ONGs</h2>

    @* Botón solo para Admin/Coordinador *@
    @if (User.IsInRole("Administrador") || User.IsInRole("Coordinador"))
    {
        <a class="btn btn-primary" asp-page="Create">Nueva ONG</a>
    }
</div>

@if (Model.Lista.Any())
{
    <div class="row g-3">
        @foreach (var o in Model.Lista)
        {
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title mb-1">@o.NombreOng</h5>
                        <div class="small text-muted mb-2">
                            
                            @if (!string.IsNullOrWhiteSpace(o.Telefono))
                            {
                                @(" · " + o.Telefono)
                            }
                        </div>
                        <p class="card-text flex-grow-1">@o.Descripcion</p>

                        <div class="d-flex gap-2">
                            <a class="btn btn-outline-primary btn-sm"
                               asp-page="/Proyectos/Index" asp-route-ongId="@o.IdOng">
                                Ver proyectos
                            </a>

                            @* Acciones solo para Admin/Coordinador *@
                            @if (User.IsInRole("Administrador") || User.IsInRole("Coordinador"))
                            {
                                <a class="btn btn-sm btn-secondary" asp-page="Edit" asp-route-id="@o.IdOng">Editar</a>
                                <a class="btn btn-sm btn-danger" asp-page="Delete" asp-route-id="@o.IdOng">Eliminar</a>
                            }
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
}
else
{
    <p class="text-muted">No hay ONGs registradas.</p>
}
